/*! angular-scheduler - v0.1.0 - 2016-09-07 */!function(a,b){"function"==typeof define&&define.amd?define(["rrule","moment","lodash","angular","jquery","jquery-ui"],b):"object"==typeof module&&module.exports?module.exports=b(require("rrule"),require("moment"),require("lodash"),require("angular"),require("jquery"),require("jquery-ui")):a.returnExports=b(a.RRule,a.moment,a._,a.angular,a.$,a.$.ui)}(this,function(a,b,c,d,e){return d.module("AngularScheduler",[]).filter("schedulerDate",[function(){return function(a){var c;return null===a?"":(c=b(a.split(" ")[0]),c.format("l")+a.slice(a.indexOf(" ")))}}]).constant("AngularScheduler.partials","/lib/").constant("AngularScheduler.useTimezone",!1).constant("AngularScheduler.showUTCField",!1).factory("SchedulerInit",["$log","$filter","$timezones","LoadLookupValues","SetDefaults","CreateObject","AngularScheduler.useTimezone","AngularScheduler.showUTCField","InRange",function(a,b,d,f,g,h,i,j,k){return function(l){var m=l.scope,n=l.requireFutureStartTime||!1;return m.schedulerShowTimeZone=i,m.schedulerShowUTCStartTime=j,m.setDefaults=function(){i&&(m.current_timezone=d.getLocal(),(e.isEmptyObject(m.current_timezone)||!m.current_timezone.name)&&(a.error("Failed to find local timezone. Defaulting to America/New_York."),m.current_timezone={name:"America/New_York"}),m.schedulerTimeZone=c.find(m.timeZones,function(a){return a.name===m.current_timezone.name})),f(m),g(m),m.scheduleTimeChange(),m.scheduleRepeatChange()},m.scheduleTimeChange=function(a){if(""===m.schedulerStartDt||null===m.schedulerStartDt||void 0===m.schedulerStartDt)m.startDateError("Provide a valid start date and time"),m.schedulerUTCTime="";else if(k(m.schedulerStartHour,0,23,2)&&k(m.schedulerStartMinute,0,59,2)&&k(m.schedulerStartSecond,0,59,2))if(i){m.resetStartDate();try{var c=m.schedulerStartDt.replace(/(\d{2})\/(\d{2})\/(\d{4})/,function(a,b,c,d){return d+"-"+b+"-"+c});c+="T"+b("schZeroPad")(m.schedulerStartHour,2)+":"+b("schZeroPad")(m.schedulerStartMinute,2)+":"+b("schZeroPad")(m.schedulerStartSecond,2)+".000Z",m.schedulerUTCTime=b("schDateStrFix")(d.toUTC(c,m.schedulerTimeZone.name).toISOString()),m.scheduler_form_schedulerStartDt_error=!1,m.scheduler_startTime_error=!1}catch(e){m.startDateError("Provide a valid start date and time")}}else m.scheduler_startTime_error=!1,m.scheduler_form_schedulerStartDt_error=!1,m.schedulerUTCTime=b("schDateStrFix")(m.schedulerStartDt+"T"+m.schedulerStartHour+":"+m.schedulerStartMinute+":"+m.schedulerStartSecond+".000Z");else m.scheduler_startTime_error=!0;a&&a()},m.$watch("schedulerStartDt",function(){m.scheduleTimeChange(m.processSchedulerEndDt)}),m.resetError=function(a){m[a]=!1},m.scheduleRepeatChange=function(){"Week"===m.schedulerFrequency.name&&(m.weekDays=[],delete m.weekDaySUClass,delete m.weekDayMOClass,delete m.weekDayTUClass,delete m.weekDayWEClass,delete m.weekDayTHClass,delete m.weekDayFRClass,delete m.weekDaySAClass),m.schedulerFrequency&&""!==m.schedulerFrequency.value&&"none"!==m.schedulerFrequency.value?(m.schedulerInterval=1,m.schedulerShowInterval=!0,m.schedulerIntervalLabel=m.schedulerFrequency.intervalLabel):(m.schedulerShowInterval=!1,m.schedulerEnd=m.endOptions[0]),m.sheduler_frequency_error=!1,m.$emit("updateSchedulerSelects")},m.showCalendar=function(a){e("#"+a).focus()},m.monthlyRepeatChange=function(){"day"!==m.monthlyRepeatOption?e("#monthDay").spinner("disable"):e("#monthDay").spinner("enable")},m.yearlyRepeatChange=function(){"month"!==m.yearlyRepeatOption?e("#yearlyRepeatDay").spinner("disable"):e("#yearlyRepeatDay").spinner("enable")},m.setWeekday=function(a,b){var c=m.weekDays.indexOf(b);c>=0?m.weekDays.splice(c,1):m.weekDays.push(b),e(a.target).blur(),m.scheduler_weekDays_error=!1},m.startDateError=function(a){m.scheduler_form&&(m.scheduler_form.schedulerStartDt&&(m.scheduler_form_schedulerStartDt_error=a,m.scheduler_form.schedulerStartDt.$pristine=!1,m.scheduler_form.schedulerStartDt.$dirty=!0),e("#schedulerStartDt").removeClass("ng-pristine").removeClass("ng-valid").removeClass("ng-valid-custom-error").addClass("ng-dirty").addClass("ng-invalid").addClass("ng-invalid-custom-error"))},m.resetStartDate=function(){m.scheduler_form&&(m.scheduler_form_schedulerStartDt_error="",m.scheduler_form.schedulerStartDt&&(m.scheduler_form.schedulerStartDt.$setValidity("custom-error",!0),m.scheduler_form.schedulerStartDt.$setPristine()))},m.schedulerEndChange=function(a,c){m[a]=b("schZeroPad")(parseInt(c),2)},m.removeZonesReady&&m.removeZonesReady(),m.removeZonesReady=m.$on("zonesReady",function(){m.timeZones=JSON.parse(localStorage.zones),m.setDefaults()}),i?d.getZoneList(m):m.setDefaults(),h(m,n)}}]).factory("CreateObject",["AngularScheduler.useTimezone","$filter","GetRule","Inject","InjectDetail","SetDefaults","$timezones","SetRule","InRange",function(a,b,c,d,f,g,h,i,j){return function(g,k){var l=function(){this.scope=g,this.useTimezone=a,this.requireFutureStartTime=k,this.getOptions=function(){var a={};return a.startDate=this.scope.schedulerUTCTime,a.frequency=this.scope.schedulerFrequency.value,a.interval=parseInt(this.scope.schedulerInterval),"after"===this.scope.schedulerEnd.value&&(a.occurrenceCount=this.scope.schedulerOccurrenceCount),"on"===this.scope.schedulerEnd.value&&(a.endDate=g.schedulerEndDt.replace(/(\d{2})\/(\d{2})\/(\d{4})/,function(a,b,c,d){return d+"-"+b+"-"+c})+"T"+b("schZeroPad")(this.scope.schedulerEndHour,2)+":"+b("schZeroPad")(this.scope.schedulerEndMinute,2)+":"+b("schZeroPad")(this.scope.schedulerEndSecond,2)+"Z"),"weekly"===this.scope.schedulerFrequency.value?a.weekDays=this.scope.weekDays:"yearly"===this.scope.schedulerFrequency.value?"month"===this.scope.yearlyRepeatOption?(a.month=this.scope.yearlyMonth.value,a.monthDay=this.scope.yearlyMonthDay):(a.setOccurrence=this.scope.yearlyOccurrence.value,a.weekDays=this.scope.yearlyWeekDay.value,a.month=this.scope.yearlyOtherMonth.value):"monthly"===this.scope.schedulerFrequency.value&&("day"===this.scope.monthlyRepeatOption?a.monthDay=this.scope.monthDay:(a.setOccurrence=this.scope.monthlyOccurrence.value,a.weekDays=this.scope.monthlyWeekDay.value)),a},this.clearErrors=function(){this.scope.scheduler_weekDays_error=!1,this.scope.scheduler_endDt_error=!1,this.scope.resetStartDate(),this.scope.scheduler_endDt_error=!1,this.scope.scheduler_interval_error=!1,this.scope.scheduler_occurrenceCount_error=!1,this.scope.scheduler_monthDay_error=!1,this.scope.scheduler_yearlyMonthDay_error=!1,this.scope.scheduler_form&&this.scope.scheduler_form.schedulerEndDt&&(this.scope.scheduler_form.schedulerEndDt.$setValidity("custom-error",!0),this.scope.scheduler_form.schedulerEndDt.$setPristine(),this.scope.scheduler_form.$setPristine())},this.setDetails=function(){var c=this.getRRule(),d=this.scope;c&&(d.rrule_nlp_description=c.toText(),d.dateChoice="local",d.occurrence_list=[],c.all(function(c,e){var f,g;return 10>e?(a?(g=h.align(c,d.schedulerTimeZone.name),f=b("schZeroPad")(g.getMonth()+1,2)+"/"+b("schZeroPad")(g.getDate(),2)+"/"+g.getFullYear()+" "+b("schZeroPad")(g.getHours(),2)+":"+b("schZeroPad")(g.getMinutes(),2)+":"+b("schZeroPad")(g.getSeconds(),2)+" "+g.getTimezoneAbbreviation()):f=b("date")(c,"MM/dd/yyyy HH:mm:ss Z"),d.occurrence_list.push({utc:b("schedulerDate")(b("schDateStrFix")(c.toISOString())),local:b("schedulerDate")(f)}),!0):!1}),d.rrule_nlp_description=c.toText().replace(/^RRule error.*$/,"Natural language description not available"),d.rrule=c.toString())},this.isValid=function(){var a,c,d,f,i,k,l=!0;if(this.clearErrors(),"none"===this.scope.schedulerFrequency.value||j(this.scope.schedulerInterval,1,999,3)||(this.scope.scheduler_interval_error=!0,l=!1),"after"!==this.scope.schedulerEnd.value||j(this.scope.schedulerOccurrenceCount,1,999,3)||(this.scope.scheduler_occurrenceCount_error=!0,l=!1),"weekly"===this.scope.schedulerFrequency.value&&0===this.scope.weekDays.length&&(this.scope.scheduler_weekDays_error=!0,l=!1),"monthly"!==this.scope.schedulerFrequency.value||"day"!==this.scope.monthlyRepeatOption||j(this.scope.monthDay,1,31,99)||(this.scope.scheduler_monthDay_error=!0,l=!1),"yearly"!==this.scope.schedulerFrequency.value||"month"!==this.scope.yearlyRepeatOption||j(this.scope.yearlyMonthDay,1,31,99)||(this.scope.scheduler_yearlyMonthDay_error=!0,l=!1),j(g.schedulerStartHour,0,23,2)&&j(g.schedulerStartMinute,0,59,2)&&j(g.schedulerStartSecond,0,59,2)||(this.scope.scheduler_startTime_error=!0,l=!1),this.scope.scheduler_form.schedulerName.$valid||(this.scope.scheduler_form.schedulerName.$dirty=!0,e("#schedulerName").addClass("ng-dirty"),l=!1),"on"===this.scope.schedulerEnd.value&&(/^\d{2}\/\d{2}\/\d{4}$/.test(this.scope.schedulerEndDt)||(this.scope.scheduler_form.schedulerEndDt.$pristine=!1,this.scope.scheduler_form.schedulerEndDt.$dirty=!0,e("#schedulerEndDt").removeClass("ng-pristine").removeClass("ng-valid").removeClass("ng-valid-custom-error").addClass("ng-dirty").addClass("ng-invalid").addClass("ng-invalid-custom-error"),this.scope.scheduler_endDt_error=!0,l=!1)),this.scope.schedulerUTCTime)try{a=new Date(this.scope.schedulerUTCTime),isNaN(a)?(this.scope.startDateError("Invalid start time"),l=!1):(k=a.getTime(),c=new Date,this.useTimezone?(d=c.getFullYear()+"-"+b("schZeroPad")(c.getMonth()+1,2)+"-"+b("schZeroPad")(c.getDate(),2)+"T"+b("schZeroPad")(c.getHours(),2)+":"+b("schZeroPad")(c.getMinutes(),2)+":"+b("schZeroPad")(c.getSeconds(),2)+".000Z",f=h.toUTC(d,this.scope.schedulerTimeZone.name),i=f.getTime()):i=c.getTime(),this.requireFutureStartTime&&i>=k&&(this.scope.startDateError("Start time must be in the future"),l=!1))}catch(m){this.scope.startDateError("Invalid start time"),l=!1}else this.scope.startDateError("Provide a start time"),l=!1;return g.schedulerIsValid=l,l&&this.setDetails(),l};var l=this;l.scope.$on("loadSchedulerDetailPane",function(){l.isValid()}),this.getRRule=function(){var a=this.getOptions();return c(a)},this.getValue=function(){var a=this.getRRule(),b=this.getOptions();return{name:g.schedulerName,rrule:a.toString(),options:b}},this.setRRule=function(a){return this.clear(),i(a,this.scope)},this.setName=function(a){this.scope.schedulerName=a},this.inject=function(a,b){return d({scope:this.scope,target:a,buttons:b})},this.injectDetail=function(a,b){return f({scope:this.scope,target:a,showRRule:b})},this.clear=function(){this.clearErrors(),this.scope.scheduler_form&&this.scope.scheduler_form.schedulerName&&this.scope.scheduler_form.schedulerName.$setPristine(),this.scope.setDefaults()},this.getUserTimezone=function(){return h.getLocal()},this.setRequireFutureStartTime=function(a){this.requireFutureStartTime=a},this.getRequireFutureStartTime=function(){return this.requireFutureStartTime},this.setShowRRule=function(a){g.showRRule=a}};return new l}}]).factory("InRange",[function(){return function(a,b,c,d){var e=new RegExp("\\d{1,"+d+"}");return e.test(a)?b>a||a>c?!1:!0:!1}}]).factory("Inject",["AngularScheduler.partials","$compile","$http","$log",function(a,b,c){return function(f){var g=f.scope,h=f.target,i=f.buttons;g.removeHtmlReady&&g.removeHtmlReady(),g.removeHtmlReady=g.$on("htmlReady",function(a,c){var f=d.isObject(h)?h:d.element(document.getElementById(h));f.html(c),b(f)(g),i&&e("#scheduler-buttons").show()}),c({method:"GET",url:a+"angular-scheduler.html"}).success(function(a){g.$emit("htmlReady",a)}).error(function(b,c){throw"Error reading "+a+"angular-scheduler.html. "+c})}}]).factory("InjectDetail",["AngularScheduler.partials","$compile","$http","$log",function(a,b,c){return function(e){var f=e.scope,g=e.target,h=e.showRRule;f.showRRule=h||!1,f.removeHtmlDetailReady&&f.removeHtmlDetailReady(),f.removeHtmlDetailReady=f.$on("htmlDetailReady",function(a,c){var e=d.isObject(g)?g:d.element(document.getElementById(g));e.html(c),b(e)(f)}),c({method:"GET",url:a+"angular-scheduler-detail.html"}).success(function(a){f.$emit("htmlDetailReady",a)}).error(function(b,c){throw"Error reading "+a+"angular-scheduler-detail.html. "+c})}}]).factory("GetRule",["$log",function(b){return function(c){var e,f=c.startDate,g=c.frequency,h=c.interval,i=c.occurrenceCount,j=c.endDate,k=c.month,l=c.monthDay,m=c.weekDays,n=c.setOccurrence,o={};if(d.isDate(f))o.dtstart=f;else try{o.dtstart=new Date(f)}catch(p){b.error("Date conversion failed. Attempted to convert "+f+" to Date. "+p.message)}if(g&&"none"!==g){if(o.freq=a[g.toUpperCase()],o.interval=h,m&&"string"==typeof m&&(o.byweekday=a[m.toUpperCase()]),m&&d.isArray(m))for(o.byweekday=[],e=0;e<m.length;e++)o.byweekday.push(a[m[e].toUpperCase()]);if(void 0!==n&&null!==n&&(o.bysetpos=n),k&&(o.bymonth=k),l&&(o.bymonthday=l),i)o.count=i;else if(j)if(d.isDate(j))o.until=j;else try{o.until=new Date(j)}catch(p){b.error("Date conversion failed. Attempted to convert "+j+" to Date. "+p.message)}}else o.freq=a.DAILY,o.interval=1,o.count=1;return new a(o)}}]).factory("SetRule",["AngularScheduler.useTimezone","$log","$timezones","$filter",function(a,b,e,f){return function(e,g){function h(a,b){var d=c.find(a,function(a){var c=a.split(/=/)[0].toUpperCase();return c===b});return d?d.split(/=/)[1].toUpperCase():null}function i(a){var b=a.toLowerCase().split(/,/),e=c.find(g.weekdays,function(a){var e=d.isArray(a.value)?a.value:[a.value],f=c.difference(e,b),g=c.difference(b,e);return 0===f.length&&0===g.length});return e}function j(b,d){var e,j,k,l,m,p,q,r=b.split(/=/)[0].toUpperCase(),s=b.split(/=/)[1];if("NAME"===r&&(g.schedulerName=s),"FREQ"===r&&(j=s.toLowerCase(),g.schedulerFrequency=c.find(g.frequencyOptions,function(a){return g.schedulerIntervalLabel=a.intervalLabel,a.value===j}),g.schedulerFrequency&&g.schedulerFrequency.name||(n="FREQ not found in list of valid options")),"INTERVAL"===r&&(parseInt(s,10)?(g.schedulerInterval=parseInt(s,10),g.schedulerShowInterval=!0):n="INTERVAL must contain an integer > 0"),"BYDAY"===r)if("WEEKLY"===h(d,"FREQ"))for(e=s.split(/,/),g.weekDays=[],k=0;k<e.length;k++)c.contains(["SU","MO","TU","WE","TH","FR","SA"],e[k])?(g.weekDays.push(e[k].toLowerCase()),g["weekDay"+e[k].toUpperCase()+"Class"]="active"):n="BYDAY contains unrecognized day value(s)";else"MONTHLY"===h(d,"FREQ")?(g.monthlyRepeatOption="other",g.monthlyWeekDay=i(s),g.monthlyWeekDay||(n="BYDAY contains unrecognized day value(s)")):(g.yearlyRepeatOption="other",g.yearlyWeekDay=i(s),g.yearlyWeekDay||(n="BYDAY contains unrecognized day value(s)"));"BYMONTHDAY"===r&&(parseInt(s,10)&&parseInt(s,10)>0&&parseInt(s,10)<32?(g.monthDay=parseInt(s,10),g.monhthlyRepeatOption="day"):n="BYMONTHDAY must contain an integer between 1 and 31"),"DTSTART"===r&&(o=!0,/\d{8}T\d{6}.*Z/.test(s)&&(s=s.replace(/(\d{4})(\d{2})(\d{2}T)(\d{2})(\d{2})(\d{2}.*$)/,function(a,b,c,d,e,f,g){return b+"-"+c+"-"+d+e+":"+f+":"+g.substr(0,2)+"Z"})),a?(l=new Date(s),m=f("schZeroPad")(l.getMonth()+1,2),p=f("schZeroPad")(l.getDate(),2),g.schedulerStartDt=m+"/"+p+"/"+l.getFullYear(),g.schedulerStartHour=f("schZeroPad")(l.getHours(),2),g.schedulerStartMinute=f("schZeroPad")(l.getMinutes(),2),g.schedulerStartSecond=f("schZeroPad")(l.getSeconds(),2),g.scheduleTimeChange()):(g.schedulerStartDt=s.replace(/T.*$/,"").replace(/(\d{4})-(\d{2})-(\d{2})/,function(a,b,c,d){return c+"/"+d+"/"+b}),q=s.replace(/^.*T/,""),g.schedulerStartHour=f("schZeroPad")(q.substr(0,2),2),g.schedulerStartMinute=f("schZeroPad")(q.substr(3,2),2),g.schedulerStartSecond=f("schZeroPad")(q.substr(6,2),2)),g.scheduleTimeChange()),"BYSETPOS"===r&&("YEARLY"===h(d,"FREQ")?(g.yearlRepeatOption="other",g.yearlyOccurrence=c.find(g.occurrences,function(a){return a.value===parseInt(s,10)}),g.yearlyOccurrence&&g.yearlyOccurrence.name||(n="BYSETPOS was not in the set of 1,2,3,4,-1")):(g.monthlyOccurrence=c.find(g.occurrences,function(a){return a.value===parseInt(s,10)}),g.monthlyOccurrence&&g.monthlyOccurrence.name||(n="BYSETPOS was not in the set of 1,2,3,4,-1"))),"COUNT"===r&&(parseInt(s,10)?(g.schedulerEnd=g.endOptions[1],g.schedulerOccurrenceCount=parseInt(s,10)):n="COUNT must be a valid integer > 0"),"UNTIL"===r&&(/\d{8}T\d{6}.*Z/.test(s)&&(s=s.replace(/(\d{4})(\d{2})(\d{2}T)(\d{2})(\d{2})(\d{2}.*$)/,function(a,b,c,d,e,f,g){return b+"-"+c+"-"+d+e+":"+f+":"+g.substr(0,2)+"Z"})),g.schedulerEnd=g.endOptions[2],g.schedulerEndDt=s.replace(/T.*$/,"").replace(/(\d{4})-(\d{2})-(\d{2})/,function(a,b,c,d){return c+"/"+d+"/"+b}),q=s.replace(/^.*T/,""),g.schedulerEndHour=f("schZeroPad")(q.substr(0,2),2),g.schedulerEndMinute=f("schZeroPad")(q.substr(3,2),2),g.schedulerEndSecond=f("schZeroPad")(q.substr(6,2),2)),"BYMONTH"===r&&("YEARLY"===h(d,"FREQ")&&h(d,"BYDAY")?(g.yearlRepeatOption="other",g.yearlyOtherMonth=c.find(g.months,function(a){return a.value===parseInt(s,10)}),g.yearlyOtherMonth&&g.yearlyOtherMonth.name||(n="BYMONTH must be an integer between 1 and 12")):(g.yearlyOption="month",g.yearlyMonth=c.find(g.months,function(a){return a.value===parseInt(s,10)}),g.yearlyMonth&&g.yearlyMonth.name||(n="BYMONTH must be an integer between 1 and 12"))),"BYMONTHDAY"===r&&(parseInt(s,10)?g.yearlyMonthDay=parseInt(s,10):n="BYMONTHDAY must be an integer between 1 and 31")}function k(){"weekly"===g.schedulerFrequency.name&&0===g.weekDays.length&&(n="Frequency is weekly, but BYDAYS value is missing."),o||(n="Warning: start date was not provided")}var l,m,n="",o=!1;if(e)if(l=e.split(/;/),d.isArray(l)){for(m=0;m<l.length&&(j(l[m],l),!n);m++);n||k()}else n="No rule entered. Provide a valid RRule string.";else n="No rule entered. Provide a valid RRule string.";return n&&b.error(n),n}}]).factory("SetDefaults",["$filter",function(a){return function(b){var c=new Date,d=a("schZeroPad")(c.getMonth()+1,2),e=a("schZeroPad")(c.getDate(),2),f=d+"/"+e+"/"+c.getFullYear();b.schedulerName="",b.weekDays=[],b.schedulerStartHour="00",b.schedulerStartMinute="00",b.schedulerStartSecond="00",b.schedulerStartDt=f,b.schedulerFrequency=b.frequencyOptions[0],b.schedulerShowEvery=!1,b.schedulerEnd=b.endOptions[0],b.schedulerInterval=1,b.schedulerOccurrenceCount=1,b.monthlyRepeatOption="day",b.monthDay=1,b.monthlyOccurrence=b.occurrences[0],b.monthlyWeekDay=b.weekdays[0],b.yearlyRepeatOption="month",b.yearlyMonth=b.months[0],b.yearlyMonthDay=1,b.yearlyWeekDay=b.weekdays[0],b.yearlyOtherMonth=b.months[0],b.yearlyOccurrence=b.occurrences[0],b.weekDayMOClass="",b.weekDayTUClass="",b.weekDayWEClass="",b.weekDayTHClass="",b.weekDayFRClass="",b.weekDaySAClass="",b.weekDaySUClass="",b.schedulerIsValid=!1,b.rrule_nlp_description="",b.rrule="",b.dateChoice="utc",b.occurrence_list=[]}}]).factory("LoadLookupValues",[function(){return function(a){a.frequencyOptions=[{name:"None (run once)",value:"none",intervalLabel:""},{name:"Minute",value:"minutely",intervalLabel:"minutes"},{name:"Hour",value:"hourly",intervalLabel:"hours"},{name:"Day",value:"daily",intervalLabel:"days"},{name:"Week",value:"weekly",intervalLabel:"weeks"},{name:"Month",value:"monthly",intervalLabel:"months"},{name:"Year",value:"yearly",intervalLabel:"years"}],a.endOptions=[{name:"Never",value:"never"},{name:"After",value:"after"},{name:"On Date",value:"on"}],a.occurrences=[{name:"first",value:1},{name:"second",value:2},{name:"third",value:3},{name:"fourth",value:4},{name:"last",value:-1}],a.weekdays=[{name:"Sunday",value:"su"},{name:"Monday",value:"mo"},{name:"Tueday",value:"tu"},{name:"Wednesday",value:"we"},{name:"Thursday",value:"th"},{name:"Friday",value:"fr"},{name:"Saturday",value:"sa"},{name:"Day",value:["mo","tu","we","th","fr","sa","su"]},{name:"Weekday",value:["mo","tu","we","th","fr"]},{name:"Weekend day",value:["sa","su"]}],a.months=[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}]}}]).filter("schZeroPad",[function(){return function(a,b){var c=(Math.pow(10,b)+"").replace(/^1/,"")+(a+"").trim();return c.substr(c.length-b)}}]).filter("schDateStrFix",[function(){return function(a){return a.replace(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).*Z/,function(a,b,c,d,e,f,g){return c+"/"+d+"/"+b+" "+e+":"+f+":"+g+" UTC"})}}]).directive("schTooltip",[function(){return{link:function(a,b,c){var d=c.placement?c.placement:"top";e(b).tooltip({html:!0,placement:d,title:c.afTooltip,trigger:"hover",container:"body"})}}}]).directive("schDatePicker",[function(){return{require:"ngModel",link:function(a,b,c){var d={},f=c.ngModel,g=new Date;d.dateFormat=c.dateFormat||"mm/dd/yy",d.defaultDate=a[f],d.minDate=c.minToday?g:null,d.maxDate=c.maxDate?new Date(c("maxDate")):null,d.changeMonth="false"===c.changeMonth?!1:!0,d.changeYear="false"===c.changeYear?!1:!0,d.beforeShow=function(){setTimeout(function(){e(".ui-datepicker").css("z-index",9999)},100)},e(b).datepicker(d)}}}]).directive("schSpinner",["$filter",function(a){return{require:"ngModel",link:function(b,c,d,f){var g=d.schSpinner,h=d.zeroPad,i=d.min||1,j=d.max||999;c.spinner({min:i,max:j,stop:function(){setTimeout(function(){b.$apply(function(){h?b[d.ngModel]=a("schZeroPad")(c.spinner("value"),h):b[d.ngModel]=c.spinner("value"),d.ngChange&&b.$eval(d.ngChange)})},100)},spin:function(){b[g].$setDirty(),f.$dirty=!0,f.$pristine=!1,b.$$phase||b.$digest()}}),e(c).on("click",function(){e(c).select()})}}}])});