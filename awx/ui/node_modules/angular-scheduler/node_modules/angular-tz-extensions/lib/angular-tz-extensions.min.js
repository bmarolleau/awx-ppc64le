/*! angular-tz-extensions - v0.3.11 - 2016-07-29 */!function(){function a(a,b,c){var d=function(a){var b,c=new Date;for(b in a)c[b]=a[b];return c};return a.module("Timezones",[]).config(function(){b.fromLocalString=function(a,c){var e,f,g=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a),h=[1,4,5,6,7,10,11];for(e=0;f=h[e];++e)g[f]=+g[f]||0;return g[2]=(+g[2]||1)-1,g[3]=+g[3]||1,d(new b.Date(g[1],g[2],g[3],g[4],g[5],g[6],g[7],c))}}).constant("$timezones.definitions.location","/tz/data").run(["$timezones.definitions.location",function(a){b.timezone.zoneFileBasePath=a,b.timezone.init({async:!1})}]).factory("$timezones",["$log","$http","$timezones.definitions.location",function(e,f,g){var h=function(c,d){var e,f;if("number"==typeof d&&(d=new Date(d)),!a.isDate(d))throw{name:"DateObjectExpected",message:'Expected a Date object; got "'+d+'".'};return d=new b.Date(d,c),e=d.getTimezone(),f={name:e,abbreviation:d.getTimezoneAbbreviation(),offset:d.getTimezoneOffset(),region:e?e.split("/")[0]:"",locality:e?e.split("/")[1].replace("_"," "):""}};return{align:function(c,e,f){if(!a.isDate(c))throw{name:"DateObjectExpected",message:'Expected a Date object; got "'+c+'".'};try{if(a.isObject(e)&&e.name)return d(new b.Date(c,e.name));if(a.isString(e))return d(new b.Date(c,e))}catch(g){if(!0===f)return c;throw new Error("The timezone argument must either be an Olson name (e.g., America/New_York), or a timezone object (produced by the resolve function) bearing an Olson name on the name property.")}},resolve:h,getLocal:function(){var a,b;if("undefined"==typeof c||"function"!=typeof c.determine)throw{name:"JSTZLibraryMissing",message:"The jsTimezoneDetect library, available at https://bitbucket.org/pellepim/jstimezonedetect, is required to detect the local timezone."};return a=c.determine().name(),a=null===a||""===a||void 0===a?"America/New_York":a,b=new Date,h(a,b)},toUTC:function(b,c){var d,e,f=a.isDate(b)?b:new Date(b);return d=f.getUTCFullYear()+"-"+("00"+(f.getUTCMonth()+1)).substr(-2,2)+"-"+("00"+f.getUTCDate()).substr(-2,2)+"T"+("00"+f.getUTCHours()).substr(-2,2)+":"+("00"+f.getUTCMinutes()).substr(-2,2)+":"+("00"+f.getUTCSeconds()).substr(-2,2)+".000Z",e=this.align(new Date(d),c),new Date(e.getTime()+6e4*e.getTimezoneOffset())},getZoneList:function(a){var b,c=[];localStorage.zones?a.$emit("zonesReady"):f({method:"GET",url:g+"/zone.tab"}).success(function(d){var e,f,g=d.match(/[^\r\n]+/g);for(e=0;e<g.length;e++)/^#/.test(g[e])||(f=g[e].split(/\s+/),c.push(f[2]));for(b=c.sort(),c=[],e=0;e<b.length;e++)c.push({name:b[e]});localStorage.zones=JSON.stringify(c),a.$emit("zonesReady")}).error(function(){e.error("Failed to load "+g+"/zone.tab")})}}}]).filter("tzAlign",["$timezones",function(b){return function(c,d){if(!(a.isDate(c)||a.isNumber(c)||a.isString(c))||!a.isString(d)&&!a.isObject(d))return c;var e,f,g=c;if(a.isNumber(c)?g=new Date(c):a.isString(c)&&(f=parseInt(c),a.isNumber(f)||(f=Date.parse(c)),g=new Date(f)),!a.isDate(g)||isNaN(g.getTime()))return c;try{e=b.align(g,d,!0)}catch(h){return c}return e&&e.getTime&&!isNaN(e.getTime())?e:c}}])}if("undefined"!=typeof module&&module&&module.exports){var b=require("timezone-js"),c=require("jstimezonedetect").jstz;a(angular,b,c),module.exports="Timezones"}else a(window.angular,window.timezoneJS,window.jstz)}();